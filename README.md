# go-prepare-scattering-matrices
Подготавливает матрицы рассеяния для использования в модели переноса

Для работы программы необхоимо иметь файл libspheroid.so/libspheroid.dll установленный в системе. 
Собрать его можно имея на борту установленны компилятор gnu-fortran. Код программы находится в директории fort. 
Там же располагается сткрипт compile.sh, позволяющий собрать библиотеку.


Помятуя по пожеляниях в связи с уже имеющейся программой prepare-scattering-matrices на python, программа теперь 
создает только необходимые файлы. Все промежуточные вычисления она хранит в оперативной памяти. В дополнении еще рисует 
графики зависимости степени линейной поляризации от угла рассеяния.


Для работы программы необходимо также иметь файлы с базами KERNLS_, которые можно взять 
[отсюда](https://github.com/DrShmirko/prepare-scattering-matrices)

Программа поддерживает следующие опции командной строки

```bash
Usage of ./prepare-mueller-matrices:
  -sf float
        Установить пороговое значение сферичности (default 1), 1<=sf<=99
  -skip int
        Сколько строк пропускать (default 6), 0<=skip<10
  -wvl float
        Длина волны для расчета матриц (default 0.87), 0.440<=wvl<=1.064
        
```

## Что получаем на выходе
В результате выполнения программы мы получим файл с префиксом total, 
который содержит нашу матрицу рассеяния и коэффициенты рассеяния, экстинкции и ослабления для всего столба атмосферы, 
приведенные к единичной объемной концентрации. Технически эти коэффициенты - оптические толщи рассеяния, 
ослабления и поглощения, так как у AERONET нет разрешения по высоте. Для задач моделирования нам нужны именно геометрические 
сечения единичной частицы. Поэтому будем полагать что так и есть, но этот аэрозольный слой имеет протяженность 1 км.

## Откуда брать входные данные
Для работы программы необходимо использовать данные AERONET Level 1.5. Единственное, нужно быть внимательными по длинам волн.
Программа настроена на работу с данными на следующих длинах волн 0.4406 0.675, 0.870 и 1.020 мкм, но на некотроых станциях 
[AERONET](https://aeronet.gsfc.nasa.gov/new_web/download_all_v3_inversions.html) 
данные получаются на других длинах волн. Текущая версия программы пропускает их и не обрабатывает.
